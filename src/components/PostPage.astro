---
import type { Page } from "astro:content";
import PostCard from "~/components/PostCard.astro";
import { getPrevNextPost } from "~/lib/utils";
import type { SiteConfig } from "~/types";

const {
  siteConfig,
  post,
  allPosts
}: {
  siteConfig: SiteConfig;
  post: Page;
  allPosts: Page[];
} = Astro.props;

const { prevPost, nextPost } = getPrevNextPost(post, allPosts);
---

<article class="post">
  <PostCard post={post} siteConfig={siteConfig} />

  <!-- 🗨️ 插入 Giscus 评论组件 -->
  <div id="giscus-comments" style="margin-top: 3rem;">
    <script src="https://giscus.app/client.js"
            data-repo="wwwaaa123122/blogcomment"
            data-repo-id="R_kgDOPX1knA"
            data-category="Announcements"
            data-category-id="DIC_kwDOPX1knM4CtwEh"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="preferred_color_scheme"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async>
    </script>
  </div>
</article>